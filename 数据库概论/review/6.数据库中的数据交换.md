#### 游标管理

将SQL变量中的**集合量**逐个取出后送入应用程序变量内供其使用

**游标的使用方法:**

```sql
--游标的定义
EXEC SQL DECLARE <游标名> CURSOR FOR <子查询>

--游标的打开
EXEC SQL OPEN <游标名>

--游标的使用
WHILE (TRUE) {
	EXEC SQL FETCH <游标名> INTO :<主程序变量>
}

--游标的关闭
EXEC SQL CLOSE <游标名> 
```

#### 动态SQL

嵌入式SQL标志/语法 : `EXEC SQL`

什么情况下需要动态SQL?

- 应用程序需要在**执行过程**中生成SQL语句
- SQL语句用到的**对象**在预编译时不存在
- 希望SQL语句的执行能够根据执行时的数据库系统内部的统计信息来采用**最优**的访问策略

**与交互式SQL区别:**

| **特性**     | **嵌入式 SQL**                                               | **交互式 SQL**                               |
| ------------ | ------------------------------------------------------------ | -------------------------------------------- |
| **使用环境** | 集成在应用程序代码中，与主机编程语言共同编译运行             | 通过 SQL 客户端工具或命令行界面直接执行      |
| **开发方式** | 在<font color='purple'>**编程语言中嵌入 SQL 语句**</font>，需使用预处理器编译 | 用户直接输入 SQL 语句，无需编程语言环        |
| **应用场景** | 应用程序需要与数据库紧密集成，如企业级应用、后台服务         | 数据库管理、数据分析、调试和测试             |
| **执行方式** | 通过程序逻辑控制 SQL 语句的执行，通常批量处理                | 用户手动输入并逐条执行 SQL 语句              |
| **错误处理** | 通过编程语言的异常处理机制进行错误捕捉和处理                 | 通过 SQL 客户端工具显示错误信息，手动处理    |
| **事务控制** | 程序内嵌事务控制逻辑，自动化处理事务的一致性                 | 用户手动管理事务，需自行输入事务控制语句     |
| **灵活性**   | 高度集成，可实现复杂的业务逻辑和数据操作                     | 适合快速查询和简单的数据操作，不适合复杂逻辑 |
| **性能**     | 高效，适合批量处理和自动化操作                               | 受限于用户操作，适合少量和即时的数据处理     |
| **安全性**   | 可以通过程序控制访问权限和数据操作                           | 依赖于 SQL 客户端工具的安全机制，较为开放    |

